<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.glog.domain.stock.mapper.DartCompanyFinancialInfoMapper">

    <insert id="insertDartCompanyFinancialInfo" parameterType="DartCompanyFinancialInfo" keyProperty="receiptNumber">
        INSERT INTO dartCompanyFinancialInfo
            ( receiptNumber, companyCode, reportCode, year, subjectDiv, subjectName, accountId, accountName, accountDetail, kiName, kiAmount, prevKiName, prevKiAmount, prev2KiName, prev2KiAmount, infoOrder, currency, insertTime, updateTime )
        VALUES
            ( #{receiptNumber}, #{companyCode}, #{reportCode}, #{year}, #{subjectDiv}, #{subjectName}, #{accountId}, #{accountName}, #{accountDetail}, #{kiName}, #{kiAmount}, #{prevKiName}, #{prevKiAmount}, #{prev2KiName}, #{prev2KiAmount}, #{infoOrder}, #{currency}, now(), now() )
    </insert>

    <insert id="insertsDartCompanyFinancialInfo" parameterType="java.util.ArrayList" useGeneratedKeys="true" keyColumn="sotckId" keyProperty="DartCompanyFinancialInfoCode">
        INSERT INTO dartCompanyFinancialInfo
            ( receiptNumber, companyCode, reportCode, year, subjectDiv, subjectName, accountId, accountName, accountDetail, kiName, kiAmount, prevKiName, prevKiAmount, prev2KiName, prev2KiAmount, infoOrder, currency, insertTime, updateTime )
        VALUES
        <foreach collection="list" item="item" index="index" separator="," open="" close="">
            ( #{item.receiptNumber}, #{item.companyCode}, #{item.reportCode}, #{item.year}, #{item.subjectDiv}, #{item.subjectName}, #{item.accountId}, #{item.accountName}, #{item.accountDetail}, #{item.kiName}, #{item.kiAmount}, #{item.prevKiName}, #{item.prevKiAmount}, #{item.prev2KiName}, #{item.prev2KiAmount}, #{item.infoOrder}, #{item.currency}, now(), now() )
        </foreach>
    </insert>

    <update id="updateDartCompanyFinancialInfo" parameterType="DartCompanyFinancialInfo">
        UPDATE 	dartCompanyFinancialInfo
        SET
        <trim prefix="" suffixOverrides=",">
            <if test="companyCode != null">companyCode = #{companyCode},</if>
            <if test="reportCode != null">reportCode = #{reportCode},</if>
            <if test="year != null">year = #{year},</if>
            <if test="subjectDiv != null">subjectDiv = #{subjectDiv},</if>
            <if test="subjectName != null">subjectName = #{subjectName},</if>
            <if test="accountId != null">accountId = #{accountId},</if>
            <if test="accountName != null">accountName = #{accountName},</if>
            <if test="accountDetail != null">accountDetail = #{accountDetail},</if>
            <if test="kiName != null">kiName = #{kiName},</if>
            <if test="kiAmount != null">kiAmount = #{kiAmount},</if>
            <if test="prevKiName != null">prevKiName = #{prevKiName},</if>
            <if test="prevKiAmount != null">prevKiAmount = #{prevKiAmount},</if>
            <if test="prev2KiName != null">prev2KiName = #{prev2KiName},</if>
            <if test="prev2KiAmount != null">prev2KiAmount = #{prev2KiAmount},</if>
            <if test="infoOrder != null">infoOrder = #{infoOrder},</if>
            <if test="currency != null">currency = #{currency},</if>
            updateTime = now()
        </trim>
        WHERE dartCompanyFinancialInfo.companyCode=#{companyCode}
        AND   dartCompanyFinancialInfo.reportCode=#{reportCode}
        AND   dartCompanyFinancialInfo.year=#{year}
        AND   dartCompanyFinancialInfo.subjectDiv=#{subjectDiv}
        AND   dartCompanyFinancialInfo.accountName=#{accountName}
    </update>

    <delete id="deleteDartCompanyFinancialInfo" parameterType="DartCompanyFinancialInfo">
        DELETE FROM dartCompanyFinancialInfo
        WHERE dartCompanyFinancialInfo.companyCode=#{companyCode}
          AND   dartCompanyFinancialInfo.reportCode=#{reportCode}
          AND   dartCompanyFinancialInfo.year=#{year}
          AND   dartCompanyFinancialInfo.subjectDiv=#{subjectDiv}
          AND   dartCompanyFinancialInfo.accountName=#{accountName}
    </delete>

    <select id="selectDartCompanyFinancialInfoList" parameterType="DartCompanyFinancialInfoParam" resultType="DartCompanyFinancialInfoResult" >
        SELECT 	dartCompanyFinancialInfo.*
        FROM 	dartCompanyFinancialInfo
        <include refid="whereDartCompanyFinancialInfo" ></include>
        <include refid="orderDartCompanyFinancialInfo" ></include>
    </select>

    <select id="selectDartCompanyFinancialInfoListCount" parameterType="DartCompanyFinancialInfoParam" resultType="java.lang.Integer">
        SELECT 	COUNT(*)
        FROM   	dartCompanyFinancialInfo
        <include refid="whereDartCompanyFinancialInfo" ></include>
    </select>

    <sql id="whereDartCompanyFinancialInfo">
        <where>
            <trim prefixOverrides = "AND | OR">
                <if test="receiptNumber != null and receiptNumber != ''">AND dartCompanyFinancialInfo.receiptNumber=#{receiptNumber}</if>
                <if test="companyCode != null and companyCode != ''">AND dartCompanyFinancialInfo.companyCode=#{companyCode}</if>
                <if test="reportCode != null and reportCode != ''">AND dartCompanyFinancialInfo.reportCode=#{reportCode}</if>
                <if test="year != null and year != ''">AND dartCompanyFinancialInfo.year=#{year}</if>
                <if test="subjectDiv != null and subjectDiv != ''">AND dartCompanyFinancialInfo.subjectDiv=#{subjectDiv}</if>
                <if test="subjectName != null and subjectName != ''">AND dartCompanyFinancialInfo.subjectName=#{subjectName}</if>
                <if test="accountId != null and accountId != ''">AND dartCompanyFinancialInfo.accountId=#{accountId}</if>
                <if test="accountName != null and accountName != ''">AND dartCompanyFinancialInfo.accountName=#{accountName}</if>
                <if test="accountDetail != null and accountDetail != ''">AND dartCompanyFinancialInfo.accountDetail=#{accountDetail}</if>
                <if test="kiName != null and kiName != ''">AND dartCompanyFinancialInfo.kiName=#{kiName}</if>
                <if test="kiAmount != null and kiAmount != ''">AND dartCompanyFinancialInfo.kiAmount=#{kiAmount}</if>
                <if test="prevKiName != null and prevKiName != ''">AND dartCompanyFinancialInfo.prevKiName=#{prevKiName}</if>
                <if test="prevKiAmount != null and prevKiAmount != ''">AND dartCompanyFinancialInfo.prevKiAmount=#{prevKiAmount}</if>
                <if test="prev2KiName != null and prev2KiName != ''">AND dartCompanyFinancialInfo.prev2KiName=#{prev2KiName}</if>
                <if test="prev2KiAmount != null and prev2KiAmount != ''">AND dartCompanyFinancialInfo.prev2KiAmount=#{prev2KiAmount}</if>
                <if test="infoOrder != null and infoOrder != ''">AND dartCompanyFinancialInfo.infoOrder=#{infoOrder}</if>
                <if test="currency != null and currency != ''">AND dartCompanyFinancialInfo.currency=#{currency}</if>
                <if test="pagingParam.filter != null and pagingParam.filter != ''">AND dartCompanyFinancialInfo.companyCode like CONCAT('%',#{pagingParam.filter},'%')</if>
            </trim>
        </where>
    </sql>

    <sql id="orderDartCompanyFinancialInfo">
        <if test='pagingParam.sortIndex != null and pagingParam.sortIndex != ""'>ORDER BY
            <choose>
                <when test="pagingParam.sortIndex eq 'receiptNumber'">receiptNumber</when>
                <when test="pagingParam.sortIndex eq 'companyCode'">companyCode</when>
                <when test="pagingParam.sortIndex eq 'reportCode'">reportCode</when>
                <when test="pagingParam.sortIndex eq 'year'">year</when>
                <when test="pagingParam.sortIndex eq 'subjectDiv'">subjectDiv</when>
                <when test="pagingParam.sortIndex eq 'subjectName'">subjectName</when>
                <when test="pagingParam.sortIndex eq 'accountId'">accountId</when>
                <when test="pagingParam.sortIndex eq 'accountName'">accountName</when>
                <when test="pagingParam.sortIndex eq 'accountDetail'">accountDetail</when>
                <when test="pagingParam.sortIndex eq 'kiName'">kiName</when>
                <when test="pagingParam.sortIndex eq 'kiAmount'">kiAmount</when>
                <when test="pagingParam.sortIndex eq 'prevKiName'">prevKiName</when>
                <when test="pagingParam.sortIndex eq 'prevKiAmount'">prevKiAmount</when>
                <when test="pagingParam.sortIndex eq 'prev2KiName'">prev2KiName</when>
                <when test="pagingParam.sortIndex eq 'prev2KiAmount'">prev2KiAmount</when>
                <when test="pagingParam.sortIndex eq 'infoOrder'">infoOrder</when>
                <when test="pagingParam.sortIndex eq 'currency'">currency</when>
                <otherwise>receiptNumber</otherwise>
            </choose>
            <choose>
                <when test="pagingParam.sortType != null and pagingParam.sortType.equalsIgnoreCase('desc')">DESC</when>
                <otherwise>ASC</otherwise>
            </choose>
        </if>
        <if test="pagingParam.rows gt 0">
            LIMIT #{pagingParam.startIndex}, #{pagingParam.endIndex}
        </if>
    </sql>
    
</mapper>