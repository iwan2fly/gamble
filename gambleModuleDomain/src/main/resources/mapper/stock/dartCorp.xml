<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.glog.domain.stock.mapper.DartCorpMapper">

    <insert id="insertDartCorp" parameterType="DartCorp" keyProperty="dartCorpCode">
        INSERT INTO dartCorp
            ( corpCode, corpName, stockCode, modifyDate, insertTime, updateTime )
        VALUES
            ( #{corpCode}, #{corpName}, #{stockCode}, #{modifyDate}, now(), now() )
    </insert>

    <insert id="insertsDartCorp" parameterType="java.util.ArrayList" useGeneratedKeys="true" keyColumn="sotckId" keyProperty="dartCorpCode">
        INSERT INTO dartCorp
            ( corpCode, corpName, stockCode, modifyDate, insertTime, updateTime )
        VALUES
        <foreach collection="list" item="item" index="index" separator="," open="" close="">
            ( #{corpCode}, #{corpName}, #{stockCode}, #{modifyDate}, now(), now() )
        </foreach>
    </insert>

    <update id="updateDartCorp" parameterType="DartCorp">
        UPDATE 	dartCorp
        SET
        <trim prefix="" suffixOverrides=",">
            <if test="corpName != null">corpName = #{corpName},</if>
            <if test="stockCode != null">stockCode = #{stockCode},</if>
            <if test="modifyDate != null">modifyDate = #{modifyDate},</if>
            updateTime = now()
        </trim>
        WHERE dartCorp.corpCode=#{corpCode}
    </update>

    <delete id="deleteDartCorp" parameterType="DartCorp">
        DELETE FROM dartCorp
        WHERE 	corpCode=#{corpCode}
    </delete>

    <select id="selectDartCorpList" parameterType="DartCorpParam" resultType="DartCorpResult" >
        SELECT 	dartCorp.*
        FROM 	dartCorp
        <include refid="whereDartCorp" ></include>
        <include refid="orderDartCorp" ></include>
    </select>

    <select id="selectDartCorpListCount" parameterType="DartCorpParam" resultType="java.lang.Integer">
        SELECT 	COUNT(*)
        FROM   	dartCorp
        <include refid="whereDartCorp" ></include>
    </select>

    <sql id="whereDartCorp">
        <where>
            <trim prefixOverrides = "AND | OR">
                <if test="corpCode != null and corpCode != ''">AND dartCorp.corpCode=#{corpCode}</if>
                <if test="corpName != null and corpName != ''">AND dartCorp.corpName=#{corpName}</if>
                <if test="stockCode != null and stockCode != ''">AND dartCorp.stockCode=#{v}</if>
                <if test="modifyDate != null and modifyDate != ''">AND dartCorp.modifyDate=#{modifyDate}</if>
                <if test="hasStockCode != null and hasStockCode == true">AND dartCorp.stockCode != ''</if>
                <if test="pagingParam.filter != null and pagingParam.filter != ''">AND dartCorp.corpName like CONCAT('%',#{pagingParam.filter},'%')</if>
            </trim>
        </where>
    </sql>

    <sql id="orderDartCorp">
        <if test='pagingParam.sortIndex != null and pagingParam.sortIndex != ""'>ORDER BY
            <choose>
                <when test="pagingParam.sortIndex eq 'corpCode'">corpCode</when>
                <when test="pagingParam.sortIndex eq 'corpName'">corpName</when>
                <when test="pagingParam.sortIndex eq 'stockCode'">stockCode</when>
                <when test="pagingParam.sortIndex eq 'modifyDate'">modifyDate</when>
                <otherwise>dartCorpCode</otherwise>
            </choose>
            <choose>
                <when test="pagingParam.sortType != null and pagingParam.sortType.equalsIgnoreCase('desc')">DESC</when>
                <otherwise>ASC</otherwise>
            </choose>
        </if>
        <if test="pagingParam.rows gt 0">
            LIMIT #{pagingParam.startIndex}, #{pagingParam.endIndex}
        </if>
    </sql>
    
</mapper>